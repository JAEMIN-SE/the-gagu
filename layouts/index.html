{{ define "main" }}

{{/* HOME SETTINGS (content/settings/home.md) */}}
{{ $home := site.GetPage "settings/home" }}

{{ $heroTitle := "사무용 가구, 깔끔하게." }}
{{ $heroDesc  := "중고/리퍼/사무용 가구를 합리적으로 제안합니다." }}
{{ $heroImg   := "/uploads/hero.jpg" }}
{{ $heroBtnT  := "지금 상담하기" }}
{{ $heroBtnL  := site.Params.kakaoChannel }}

{{ with $home }}
  {{ with .Params.heroTitle }}{{ $heroTitle = . }}{{ end }}
  {{ with .Params.heroDesc }}{{ $heroDesc  = . }}{{ end }}
  {{ with .Params.heroImage }}{{ $heroImg  = . }}{{ end }}
  {{ with .Params.heroButtonText }}{{ $heroBtnT = . }}{{ end }}
  {{ with .Params.heroButtonLink }}{{ $heroBtnL = . }}{{ end }}
{{ end }}

<div class="row g-4">
  <!-- HERO -->
  <div class="col-12">
    <div class="p-5 bg-light rounded-4 border hero-wrap">
      <div class="row align-items-center g-4">
        <div class="col-12 col-lg-7">
          <h1 class="fw-bold display-5 mb-2 hero-title">{{ $heroTitle }}</h1>
          <p class="text-muted fs-5 mb-4 hero-desc">
            {{ $heroDesc }}
          </p>

          <div class="d-flex flex-wrap gap-2 hero-actions">
            <a class="btn btn-warning btn-lg" href="{{ $heroBtnL }}" target="_blank" rel="noopener">{{ $heroBtnT }}</a>

            {{ with site.Params.tel }}
              <a class="btn btn-outline-dark btn-lg" href="tel:{{ . }}">전화하기</a>
            {{ end }}
          </div>
        </div>

        <div class="col-12 col-lg-5 hero-media">
          <div class="rounded-4 overflow-hidden bg-white border">
            <img src="{{ $heroImg }}" class="img-fluid w-100" alt="{{ site.Title }}">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CATEGORY CHIPS -->
  <div class="col-12">
    <div class="d-flex flex-wrap gap-2 hero-actions">
      {{ range (slice "책상" "의자" "파티션" "캐비닛" "회의테이블" "서랍" "책장") }}
        <span class="badge bg-secondary-subtle text-dark border px-3 py-2">{{ . }}</span>
      {{ end }}
    </div>
  </div>

  <!-- LATEST PRODUCTS -->
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h3 class="fw-bold mb-0">최신 상품</h3>
      <a class="text-decoration-none" href="/products/">전체 보기 →</a>
    </div>

    <div class="row g-3">
      {{ range first 8 (where (where site.RegularPages "Section" "products") ".Params.soldOut" "ne" true) }}
      <div class="col-12 col-md-6 col-lg-3">
        <a class="text-decoration-none text-dark" href="{{ .RelPermalink }}">
          <div class="card h-100 border-0 shadow-sm product-card">
            <div class="ratio ratio-4x3 bg-light rounded-top overflow-hidden">
              {{ $img := index (.Params.images | default (slice)) 0 }}
              {{ if $img }}
    <img src="{{ $img }}" class="object-fit-cover w-100 h-100" alt="{{ .Title }}">
{{ else }}
    <div class="img-placeholder">이미지 준비중</div>
{{ end }}
            </div>
            <div class="card-body">
              <div class="fw-semibold">{{ .Title }}</div>
              <div class="text-muted small">{{ .Params.brand }} · 상태 {{ .Params.condition }}</div>
              <div class="fw-bold mt-2">{{ .Params.price }}원</div>
            </div>
          </div>
        </a>
      </div>
      {{ end }}
    </div>
  </div>
</div>

{{ end }}